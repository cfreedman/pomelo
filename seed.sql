CREATE DATABASE pomelo;

\c pomelo;

CREATE TABLE IF NOT EXISTS stores (
    id INTEGER GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
    name VARCHAR(50) NOT NULL,
    address VARCHAR(100),
    latitude FLOAT,
    longitude FLOAT
);

CREATE TABLE IF NOT EXISTS ingredients (
    id INTEGER GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
    name VARCHAR(50) NOT NULL,
    units VARCHAR(20),
    store_id INTEGER REFERENCES stores(id)
);

CREATE TABLE IF NOT EXISTS tags (
    id INTEGER GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
    name VARCHAR(50) NOT NULL
);

CREATE TABLE IF NOT EXISTS recipes (
    id INTEGER GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
    name VARCHAR(50) NOT NULL,
    cuisine VARCHAR(100),
    meal_type VARCHAR(50),
    servings INTEGER NOT NULL
);

CREATE TABLE IF NOT EXISTS ingredient_recipe_bridge (
    recipe_id INTEGER REFERENCES recipes(id),
    ingredient_id INTEGER REFERENCES ingredients(id),
    quantity INTEGER NOT NULL,
    PRIMARY KEY (recipe_id, ingredient_id)
);

CREATE TABLE IF NOT EXISTS tag_recipe_bridge (
    recipe_id INTEGER REFERENCES recipes(id),
    tag_id INTEGER REFERENCES tags(id),
    PRIMARY KEY (recipe_id, tag_id)
);

CREATE TABLE IF NOT EXISTS meal_plans (
    id INTEGER GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
    week_start DATE NOT NULL
);

CREATE TABLE IF NOT EXISTS recipe_meal_plan_bridge (
    recipe_id INTEGER REFERENCES recipes(id),
    meal_plan_id INTEGER REFERENCES meal_plans(id),
    PRIMARY KEY (recipe_id, meal_plan_id),
    quantity INTEGER NOT NULL DEFAULT 1
);

CREATE TABLE IF NOT EXISTS shopping_lists (
    id INTEGER GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
    week_start DATE NOT NULL
);

CREATE TABLE IF NOT EXISTS ingredient_shopping_list_bridge (
    ingredient_id INTEGER REFERENCES ingredients(id),
    shopping_list_id INTEGER REFERENCES shopping_lists(id),
    PRIMARY KEY (ingredient_id, shopping_list_id),
    quantity INTEGER NOT NULL DEFAULT 1
);

INSERT INTO stores (name, address, latitude, longitude) VALUES
('Walmart', '123 Main St, Cityville', 40.7128, -74.0060),
('Target', '456 Elm St, Townsville', 34.0522, -118.2437),
('Whole Foods', '789 Oak St, Villageburg', 37.7749, -122.4194),
('Trader Joes', '101 Pine St, Hamletton', 41.8781, -87.6298),
('Costco', '202 Maple St, Boroughtown', 47.6062, -122.3321),
('Acme Markets', '1400 E Passyunk Ave, Philadelphia, PA', 39.9335, -75.1590),
('ShopRite', '2800 Fox St, Philadelphia, PA', 39.9972, -75.1767),
('Giant Food Stores', '2550 Grant Ave, Philadelphia, PA', 40.0727, -75.0276),
('Fresh Grocer', '4160 Monument Rd, Philadelphia, PA', 40.0086, -75.2242),
('Aldi', '6119 N Broad St, Philadelphia, PA', 40.0452, -75.1377),
('Weis Markets', '2100 County Line Rd, Huntingdon Valley, PA', 40.1302, -75.0617),
('Whole Foods Market', '2101 Pennsylvania Ave, Philadelphia, PA', 39.9637, -75.1740),
('Trader Joes', '2121 Market St, Philadelphia, PA', 39.9542, -75.1757),
('Sprouts Farmers Market', '1000 S Broad St, Philadelphia, PA', 39.9364, -75.1667),
('Redners Warehouse Markets', '500 Eon Blue Bell Pike, Blue Bell, PA', 40.1521, -75.2772);


INSERT INTO ingredients (name, units, store_id) VALUES
('Chicken Breast', 'grams', 1),
('Broccoli', 'grams', 7),
('Rice', 'grams', 12),
('Olive Oil', 'ml', 3),
('Salt', 'grams', 10),
('Pepper', 'grams', 1),
('Garlic', 'cloves', 14),
('Onion', 'pieces', 5),
('Tomato', 'pieces', 2),
('Carrot', 'pieces', 9),
('Potato', 'pieces', 8),
('Bell Pepper', 'pieces', 4),
('Spinach', 'grams', 13),
('Mushroom', 'grams', 6),
('Cheddar Cheese', 'grams', 11),
('Milk', 'ml', 15),
('Egg', 'pieces', 2),
('Butter', 'grams', 8),
('Basil', 'grams', 1),
('Parsley', 'grams', 7),
('Cilantro', 'grams', 3),
('Lemon', 'pieces', 12),
('Lime', 'pieces', 5),
('Beef', 'grams', 9),
('Pork', 'grams', 14),
('Salmon', 'grams', 6),
('Shrimp', 'grams', 4),
('Tofu', 'grams', 13),
('Black Beans', 'grams', 2),
('Kidney Beans', 'grams', 10),
('Chickpeas', 'grams', 11),
('Corn', 'grams', 15),
('Green Peas', 'grams', 1),
('Zucchini', 'pieces', 8),
('Cucumber', 'pieces', 7),
('Lettuce', 'grams', 3),
('Cabbage', 'grams', 9),
('Apple', 'pieces', 5),
('Banana', 'pieces', 12),
('Orange', 'pieces', 14),
('Strawberry', 'grams', 4),
('Blueberry', 'grams', 6),
('Yogurt', 'grams', 2),
('Honey', 'ml', 13),
('Soy Sauce', 'ml', 10),
('Vinegar', 'ml', 8),
('Flour', 'grams', 7),
('Sugar', 'grams', 15),
('Baking Powder', 'grams', 11),
('Oats', 'grams', 9),
('Almonds', 'grams', 3);

INSERT INTO tags (name) VALUES
('Healthy'),
('Quick'),
('Vegetarian'),
('Vegan'),
('Gluten-Free'),
('Low Carb'),
('Dairy-Free'),
('High Protein'),
('Comfort Food');


INSERT INTO recipes (name, cuisine, meal_type, servings) VALUES
('Chicken Stir Fry', 'Chinese', 'Dinner', 4),
('Pasta Primavera', 'Italian', 'Lunch', 2),
('Garlic Butter Shrimp', 'Seafood', 'Dinner', 3),
('Vegetable Soup', 'American', 'Lunch', 4),
('Grilled Cheese Sandwich', 'American', 'Breakfast', 1),
('Beef Tacos', 'Mexican', 'Dinner', 4),
('Vegetable Curry', 'Indian', 'Lunch', 3),
('Salmon Teriyaki', 'Japanese', 'Dinner', 2),
('Greek Salad', 'Greek', 'Lunch', 2),
('Egg Fried Rice', 'Chinese', 'Dinner', 3),
('Mushroom Risotto', 'Italian', 'Dinner', 2),
('Chicken Caesar Salad', 'American', 'Lunch', 2),
('Shakshuka', 'Middle Eastern', 'Breakfast', 2),
('Pancakes', 'American', 'Breakfast', 4),
('Lentil Soup', 'Mediterranean', 'Lunch', 4),
('Stuffed Peppers', 'Mediterranean', 'Dinner', 3),
('Fish Tacos', 'Mexican', 'Lunch', 2),
('Quinoa Bowl', 'Vegetarian', 'Lunch', 2),
('Tofu Stir Fry', 'Asian', 'Dinner', 3),
('Banana Oat Muffins', 'American', 'Breakfast', 6);

INSERT INTO meal_plans (week_start) VALUES
('2025-05-01'),
('2025-05-02'),
('2025-05-03'),
('2025-05-04'),
('2025-05-05'),
('2025-05-06'),
('2025-05-07'),
('2025-05-08'),
('2025-05-09'),
('2025-05-10'),
('2025-05-11'),
('2025-05-12'),
('2025-05-13'),
('2025-05-14'),
('2025-05-15'),
('2025-05-16'),
('2025-05-17'),
('2025-05-18'),
('2025-05-19'),
('2025-05-20'),
('2025-05-21'),
('2025-05-22'),
('2025-05-23'),
('2025-05-24'),
('2025-05-25'),
('2025-05-26'),
('2025-05-27'),
('2025-05-28'),
('2025-05-29'),
('2025-05-30'),
('2025-05-31'),
('2025-06-01'),
('2025-06-02'),
('2025-06-03'),
('2025-06-04'),
('2025-06-05'),
('2025-06-06'),
('2025-06-07'),
('2025-06-08'),
('2025-06-09'),
('2025-06-10'),
('2025-06-11'),
('2025-06-12'),
('2025-06-13'),
('2025-06-14'),
('2025-06-15'),
('2025-06-16'),
('2025-06-17'),
('2025-06-18'),
('2025-06-19'),
('2025-06-20'),
('2025-06-21'),
('2025-06-22'),
('2025-06-23'),
('2025-06-24'),
('2025-06-25'),
('2025-06-26'),
('2025-06-27'),
('2025-06-28'),
('2025-06-29'),
('2025-06-30'),
('2025-07-01'),
('2025-07-02'),
('2025-07-03'),
('2025-07-04'),
('2025-07-05'),
('2025-07-06'),
('2025-07-07'),
('2025-07-08'),
('2025-07-09'),
('2025-07-10'),
('2025-07-11'),
('2025-07-12'),
('2025-07-13'),
('2025-07-14'),
('2025-07-15'),
('2025-07-16'),
('2025-07-17'),
('2025-07-18'),
('2025-07-19'),
('2025-07-20'),
('2025-07-21'),
('2025-07-22'),
('2025-07-23'),
('2025-07-24'),
('2025-07-25'),
('2025-07-26'),
('2025-07-27'),
('2025-07-28'),
('2025-07-29'),
('2025-07-30'),
('2025-07-31')

INSERT INTO shopping_lists (week_start) VALUES
('2025-05-04'),
('2025-05-11'),
('2025-05-18'),
('2025-05-25'),
('2025-06-01'),
('2025-06-08'),
('2025-06-15'),
('2025-06-22'),
('2025-06-29'),
('2025-07-06'),
('2025-07-13'),
('2025-07-20'),
('2025-07-27')

INSERT INTO ingredient_recipe_bridge (recipe_id, ingredient_id, quantity) VALUES
(1, 1, 500),
(1, 2, 200),
(1, 4, 30),
(2, 9, 300),
(2, 8, 1),
(3, 1, 300),
(3, 7, 2),
(4, 2, 150),
(4, 6, 5),
(5, 8, 2),
(5, 15, 100),
(6, 1, 400),
(6, 10, 2),
(7, 2, 200),
(7, 11, 1),
(8, 1, 250),
(8, 12, 1),
(9, 2, 100),
(9, 13, 50),
(10, 1, 300),
(10, 14, 2),
(11, 2, 200),
(11, 15, 100),
(12, 16, 3),
(12, 17, 2),
(13, 18, 4),
(13, 19, 1),
(14, 20, 2),
(14, 21, 1),
(15, 22, 3),
(15, 23, 1),
(16, 24, 2),
(16, 25, 1);

INSERT INTO tag_recipe_bridge (recipe_id, tag_id) VALUES
(1, 1),
(1, 2),
(2, 3),
(3, 1),
(4, 2),
(5, 3);

INSERT INTO ingredient_shopping_list_bridge (ingredient_id, shopping_list_id, quantity) VALUES
-- For each shopping_list_id (1-13), assign 15-20 random ingredients with random quantities (1-4)
-- Example data (randomized, non-repeating per list):

-- Shopping List 1
(5, 1, 2),
(12, 1, 3),
(18, 1, 1),
(23, 1, 2),
(27, 1, 4),
(31, 1, 2),
(7, 1, 1),
(44, 1, 3),
(9, 1, 2),
(15, 1, 1),
(21, 1, 2),
(38, 1, 2),
(2, 1, 3),
(29, 1, 1),
(41, 1, 2),
(47, 1, 1),
(50, 1, 2),

-- Shopping List 2
(3, 2, 2),
(8, 2, 1),
(13, 2, 3),
(19, 2, 2),
(24, 2, 1),
(28, 2, 2),
(32, 2, 4),
(10, 2, 2),
(45, 2, 1),
(16, 2, 2),
(22, 2, 3),
(39, 2, 1),
(4, 2, 2),
(30, 2, 1),
(42, 2, 2),
(48, 2, 1),
(1, 2, 2),

-- Shopping List 3
(6, 3, 2),
(11, 3, 1),
(17, 3, 3),
(20, 3, 2),
(25, 3, 1),
(33, 3, 2),
(14, 3, 4),
(46, 3, 2),
(36, 3, 1),
(40, 3, 2),
(49, 3, 3),
(26, 3, 1),
(35, 3, 2),
(43, 3, 1),
(37, 3, 2),
(34, 3, 1),

-- Shopping List 4
(2, 4, 2),
(7, 4, 1),
(12, 4, 3),
(18, 4, 2),
(23, 4, 1),
(27, 4, 2),
(31, 4, 4),
(8, 4, 2),
(44, 4, 1),
(15, 4, 2),
(21, 4, 3),
(38, 4, 1),
(29, 4, 2),
(41, 4, 1),
(47, 4, 2),
(50, 4, 1),

-- Shopping List 5
(3, 5, 2),
(9, 5, 1),
(13, 5, 3),
(19, 5, 2),
(24, 5, 1),
(28, 5, 2),
(32, 5, 4),
(10, 5, 2),
(45, 5, 1),
(16, 5, 2),
(22, 5, 3),
(39, 5, 1),
(4, 5, 2),
(30, 5, 1),
(42, 5, 2),
(48, 5, 1),

-- Shopping List 6
(6, 6, 2),
(11, 6, 1),
(17, 6, 3),
(20, 6, 2),
(25, 6, 1),
(33, 6, 2),
(14, 6, 4),
(46, 6, 2),
(36, 6, 1),
(40, 6, 2),
(49, 6, 3),
(26, 6, 1),
(35, 6, 2),
(43, 6, 1),
(37, 6, 2),
(34, 6, 1),

-- Shopping List 7
(1, 7, 2),
(5, 7, 1),
(8, 7, 3),
(12, 7, 2),
(18, 7, 1),
(23, 7, 2),
(27, 7, 4),
(31, 7, 2),
(7, 7, 1),
(44, 7, 3),
(9, 7, 2),
(15, 7, 1),
(21, 7, 2),
(38, 7, 2),
(2, 7, 3),
(29, 7, 1),

-- Shopping List 8
(3, 8, 2),
(8, 8, 1),
(13, 8, 3),
(19, 8, 2),
(24, 8, 1),
(28, 8, 2),
(32, 8, 4),
(10, 8, 2),
(45, 8, 1),
(16, 8, 2),
(22, 8, 3),
(39, 8, 1),
(4, 8, 2),
(30, 8, 1),
(42, 8, 2),
(48, 8, 1),

-- Shopping List 9
(6, 9, 2),
(11, 9, 1),
(17, 9, 3),
(20, 9, 2),
(25, 9, 1),
(33, 9, 2),
(14, 9, 4),
(46, 9, 2),
(36, 9, 1),
(40, 9, 2),
(49, 9, 3),
(26, 9, 1),
(35, 9, 2),
(43, 9, 1),
(37, 9, 2),
(34, 9, 1),

-- Shopping List 10
(2, 10, 2),
(7, 10, 1),
(12, 10, 3),
(18, 10, 2),
(23, 10, 1),
(27, 10, 2),
(31, 10, 4),
(8, 10, 2),
(44, 10, 1),
(15, 10, 2),
(21, 10, 3),
(38, 10, 1),
(29, 10, 2),
(41, 10, 1),
(47, 10, 2),
(50, 10, 1),

-- Shopping List 11
(3, 11, 2),
(9, 11, 1),
(13, 11, 3),
(19, 11, 2),
(24, 11, 1),
(28, 11, 2),
(32, 11, 4),
(10, 11, 2),
(45, 11, 1),
(16, 11, 2),
(22, 11, 3),
(39, 11, 1),
(4, 11, 2),
(30, 11, 1),
(42, 11, 2),
(48, 11, 1),

-- Shopping List 12
(6, 12, 2),
(11, 12, 1),
(17, 12, 3),
(20, 12, 2),
(25, 12, 1),
(33, 12, 2),
(14, 12, 4),
(46, 12, 2),
(36, 12, 1),
(40, 12, 2),
(49, 12, 3),
(26, 12, 1),
(35, 12, 2),
(43, 12, 1),
(37, 12, 2),
(34, 12, 1),

-- Shopping List 13
(1, 13, 2),
(5, 13, 1),
(8, 13, 3),
(12, 13, 2),
(18, 13, 1),
(23, 13, 2),
(27, 13, 4),
(31, 13, 2),
(7, 13, 1),
(44, 13, 3),
(9, 13, 2),
(15, 13, 1),
(21, 13, 2),
(38, 13, 2),
(2, 13, 3),
(29, 13, 1)

INSERT INTO recipe_meal_plan_bridge (recipe_id, meal_plan_id, quantity) VALUES
-- Each meal_plan_id (1-92) gets 2-3 random recipes with random quantities (1-4)
(7, 1, 2),
(14, 1, 1),
(3, 2, 3),
(19, 2, 2),
(11, 3, 2),
(5, 3, 1),
(16, 4, 4),
(2, 4, 2),
(9, 5, 1),
(18, 5, 3),
(6, 6, 2),
(13, 6, 2),
(1, 7, 1),
(17, 7, 2),
(12, 8, 3),
(8, 8, 1),
(20, 9, 2),
(4, 9, 2),
(10, 10, 1),
(15, 10, 3),
(2, 11, 2),
(11, 11, 1),
(5, 12, 2),
(19, 12, 3),
(7, 13, 1),
(16, 13, 2),
(3, 14, 2),
(14, 14, 1),
(8, 15, 3),
(12, 15, 2),
(18, 16, 1),
(6, 16, 2),
(9, 17, 2),
(1, 17, 1),
(13, 18, 3),
(4, 18, 2),
(17, 19, 2),
(10, 19, 1),
(15, 20, 2),
(20, 20, 3),
(2, 21, 1),
(8, 21, 2),
(11, 22, 2),
(5, 22, 1),
(16, 23, 3),
(7, 23, 2),
(14, 24, 1),
(3, 24, 2),
(19, 25, 2),
(12, 25, 1),
(6, 26, 3),
(18, 26, 2),
(1, 27, 2),
(9, 27, 1),
(4, 28, 3),
(13, 28, 2),
(17, 29, 1),
(10, 29, 2),
(15, 30, 2),
(20, 30, 1),
(2, 31, 3),
(8, 31, 2),
(11, 32, 1),
(5, 32, 2),
(16, 33, 2),
(7, 33, 1),
(14, 34, 3),
(3, 34, 2),
(19, 35, 1),
(12, 35, 2),
(6, 36, 2),
(18, 36, 1),
(1, 37, 3),
(9, 37, 2),
(4, 38, 1),
(13, 38, 2),
(17, 39, 2),
(10, 39, 3),
(15, 40, 1),
(20, 40, 2),
(2, 41, 2),
(8, 41, 1),
(11, 42, 3),
(5, 42, 2),
(16, 43, 1),
(7, 43, 2),
(14, 44, 2),
(3, 44, 1),
(19, 45, 3),
(12, 45, 2),
(6, 46, 1),
(18, 46, 2),
(1, 47, 2),
(9, 47, 3),
(4, 48, 1),
(13, 48, 2),
(17, 49, 2),
(10, 49, 1),
(15, 50, 3),
(20, 50, 2),
(2, 51, 1),
(8, 51, 2),
(11, 52, 2),
(5, 52, 3),
(16, 53, 1),
(7, 53, 2),
(14, 54, 2),
(3, 54, 1),
(19, 55, 2),
(12, 55, 1),
(6, 56, 3),
(18, 56, 2),
(1, 57, 2),
(9, 57, 1),
(4, 58, 3),
(13, 58, 2),
(17, 59, 1),
(10, 59, 2),
(15, 60, 2),
(20, 60, 1),
(2, 61, 3),
(8, 61, 2),
(11, 62, 1),
(5, 62, 2),
(16, 63, 2),
(7, 63, 1),
(14, 64, 3),
(3, 64, 2),
(19, 65, 1),
(12, 65, 2),
(6, 66, 2),
(18, 66, 1),
(1, 67, 3),
(9, 67, 2),
(4, 68, 1),
(13, 68, 2),
(17, 69, 2),
(10, 69, 3),
(15, 70, 1),
(20, 70, 2),
(2, 71, 2),
(8, 71, 1),
(11, 72, 3),
(5, 72, 2),
(16, 73, 1),
(7, 73, 2),
(14, 74, 2),
(3, 74, 1),
(19, 75, 3),
(12, 75, 2),
(6, 76, 1),
(18, 76, 2),
(1, 77, 2),
(9, 77, 3),
(4, 78, 1),
(13, 78, 2),
(17, 79, 2),
(10, 79, 1),
(15, 80, 3),
(20, 80, 2),
(2, 81, 1),
(8, 81, 2),
(11, 82, 2),
(5, 82, 3),
(16, 83, 1),
(7, 83, 2),
(14, 84, 2),
(3, 84, 1),
(19, 85, 2),
(12, 85, 1),
(6, 86, 3),
(18, 86, 2),
(1, 87, 2),
(9, 87, 1),
(4, 88, 3),
(13, 88, 2),
(17, 89, 1),
(10, 89, 2),
(15, 90, 2),
(20, 90, 1),
(2, 91, 3),
(8, 91, 2),
(11, 92, 1),
(5, 92, 2)

